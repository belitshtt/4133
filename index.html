<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beli Thần Số Học Tỉnh Thức</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
        <style>
/*
 * BẢN NÂNG CẤP CSS CHUYÊN NGHIỆP
 * Ngôn ngữ: Tiếng Việt
 * Người thực hiện: Gemini
 * Ngày cập nhật: 11/08/2025
 *
 * CÁC THAY ĐỔI CHÍNH (THEO YÊU CẦU):
 * 1. Sửa lỗi hiển thị bảng trên điện thoại:
 * - Đã cho phép văn bản trong các ô (th, td) tự động xuống dòng (white-space: normal).
 * Điều này giải quyết vấn đề nội dung bị "khuất" và giúp bảng cân đối hơn.
 * - Thêm canh lề theo chiều dọc (vertical-align: middle) để các ô trông gọn gàng khi có nhiều dòng.
 *
 * 2. Cập nhật Font chữ:
 * - Áp dụng font 'Cambria' cho toàn bộ trang theo yêu cầu của bạn.
 *
 * 3. Tối ưu hóa:
 * - Giữ nguyên toàn bộ các cải tiến về giao diện, màu sắc và hiệu ứng.
 */

:root {
    --primary-color: #3B82F6; /* Xanh dương làm điểm nhấn */
    --primary-hover: #2563EB; /* Màu khi hover, đậm hơn một chút */
    --background-color: #F8FAFC; /* Màu nền xám rất nhạt, sạch sẽ */
    --card-background: #FFFFFF; /* Màu trắng cho các thẻ */
    --text-primary: #1E293B; /* Màu chữ chính, đen-xám */
    --text-secondary: #64748B; /* Màu chữ phụ, xám nhạt hơn */
    --border-color: #E2E8F0; /* Màu viền, rất nhạt */
    --table-header-bg: #F8FAFC; /* Màu nền tiêu đề bảng, đồng bộ với nền trang */
    --table-row-hover-bg: #EFF6FF; /* Màu khi hover dòng của bảng */
}

/* --- Thiết lập cơ bản & Reset --- */
*, *::before, *::after {
    box-sizing: border-box;
}

html {
    font-size: 16px;
    scroll-behavior: smooth;
}

body {
    font-family: 'Cambria', 'Segoe UI', 'Roboto', 'Helvetica Neue', Arial, sans-serif; /* Cập nhật font chữ */
    background-color: var(--background-color);
    color: var(--text-primary);
    line-height: 1.6;
    margin: 0;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

/* --- Bố cục chính --- */
.container {
    max-width: 1200px;
    margin: 1.5rem auto;
    padding: 0 1rem;
}

.card {
    background: var(--card-background);
    border-radius: 0.75rem; /* Bo góc nhẹ nhàng hơn */
    border: 1px solid var(--border-color); /* Thêm viền nhẹ để thẻ nổi bật hơn trên nền */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* Bóng đổ rất nhẹ mặc định */
    margin-bottom: 1.5rem;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    overflow: hidden; /* Giữ overflow hidden để bo góc hoạt động đúng */
}

.card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.07), 0 4px 6px -2px rgba(0, 0, 0, 0.05); /* Bóng đổ rõ hơn khi hover */
}

.card-header {
    padding: 1.25rem 1.5rem;
    background-color: var(--card-background);
    border-bottom: 1px solid var(--border-color);
    text-align: center;
}

.card-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0;
}

.card-header img {
    width: 100%;
    max-width: 250px;
    margin: 0 auto;
}

.card-body {
    padding: 1.5rem;
}

/* --- Form & Nút bấm --- */
.input-group {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
    margin-bottom: 1rem;
}

input[type="text"] {
    width: 100%;
    padding: 0.75rem 1rem;
    border: 1px solid var(--border-color);
    border-radius: 0.5rem;
    font-size: 1rem;
    background-color: #FFF;
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
}

input[type="text"]:focus {
    outline: none;
    border-color: var(--primary-color);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.25);
}

.btn {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    padding: 0.75rem 1.5rem;
    background-color: var(--primary-color);
    color: white;
    border: none;
    border-radius: 0.5rem;
    font-weight: 600; /* Tăng độ đậm cho chữ */
    font-size: 0.95rem; /* Giảm nhẹ cỡ chữ */
    cursor: pointer;
    transition: background-color 0.2s ease, transform 0.2s ease;
    text-transform: uppercase;
    letter-spacing: 0.05em; /* Tăng khoảng cách ký tự */
    white-space: nowrap;
}

.btn svg {
    width: 1.125rem; /* 18px */
    height: 1.125rem;
    margin-right: 0.5rem;
}

.btn:hover {
    background-color: var(--primary-hover);
    transform: translateY(-1px);
}

/* --- Bảng dữ liệu (HIỂN THỊ NHẤT QUÁN) --- */
.table-responsive {
    width: 100%;
    overflow-x: auto; /* Chìa khoá cho bảng responsive trên mọi thiết bị */
    -webkit-overflow-scrolling: touch;
    border: 1px solid var(--border-color);
    border-radius: 0.75rem;
    /* Đổ bóng nhẹ cho toàn bộ bảng */
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.05);
}

table {
    width: 100%;
    border-collapse: collapse; /* Gộp các đường viền lại */
    background-color: var(--card-background);
}

/* Canh lề và khoảng cách cho các ô */
th, td {
    padding: 0.875rem 1.25rem; /* Tăng padding để thoáng hơn */
    text-align: left;
    /* [FIX] Cho phép chữ tự xuống dòng để không bị khuất trên mobile */
    white-space: normal; 
    /* [FIX] Canh giữa theo chiều dọc để đẹp hơn khi chữ có nhiều dòng */
    vertical-align: middle; 
    border-bottom: 1px solid var(--border-color); /* Chỉ giữ lại đường kẻ ngang */
}

/* Kiểu cho tiêu đề bảng (Header) */
th {
    background-color: var(--table-header-bg);
    font-weight: 600;
    color: var(--text-secondary);
    font-size: 0.8rem; /* Chữ nhỏ hơn một chút */
    text-transform: uppercase; /* VIẾT HOA TIÊU ĐỀ */
    letter-spacing: 0.05em;
}

/* Hiệu ứng "ngựa vằn" cho các dòng chẵn */
tr:nth-of-type(even) {
    background-color: #FDFDFD; /* Một màu xám rất nhẹ, gần như trắng */
}

/* Bỏ đường viền của dòng cuối cùng */
tr:last-child td {
    border-bottom: none;
}

/* Hiệu ứng hover cho các dòng */
tr:hover {
    background-color: var(--table-row-hover-bg);
}

/* Canh giữa cho các cột không phải cột đầu tiên */
.result-table th:not(:first-child),
.result-table td:not(:first-child) {
    text-align: center;
}

/* Màu chữ đặc biệt cho dữ liệu kết quả */
.result-table td:not(:first-child) {
    font-weight: 500;
    color: var(--primary-color);
}


/* --- Iframe & Phần kết quả --- */
#dynamicFrame, #dynamicFramess {
    width: 100%;
    height: 450px;
    border: 1px solid var(--border-color); /* Thêm viền cho iframe */
    margin-top: 1rem;
    border-radius: 0.75rem;
    background-color: var(--card-background);
}


/* --- MEDIA QUERIES cho màn hình lớn hơn (Desktop) --- */
@media (min-width: 768px) {
    .container {
        margin: 2.5rem auto; /* Tăng khoảng cách trên desktop */
        padding: 0 1.5rem;
    }
    
    .input-group {
        flex-direction: row;
        align-items: center;
        gap: 1rem;
    }

    .result-section {
        flex-direction: row;
        gap: 2rem;
    }
    
    #dynamicFrame, #dynamicFramess {
        height: 600px;
    }
}


    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <div class="card-header">
                <img src="https://tshbeli.com.vn/wp-content/uploads/2024/10/anh-logo-Beli.jpg" alt="Logo">
            </div>
            <div class="card-body">
                <div class="input-group">
                    <input type="text" id="inputString" placeholder="Nhập họ tên hoặc chuỗi ký tự (Ví dụ: Nguyễn Văn A)">
                    <button onclick="calculateAll()" class="btn">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10H9m3-5h3m-6 0h0m0 0h6m-6 0H6"/>
                        </svg>
                        Tính toán
                    </button>
                </div>
                <div id="nameInfo" class="name-info hidden"></div>
            </div>
        </div>

        <div class="result-section">
            <div class="card" hidden>
                <div class="card-header">

                </div>
                <div class="card-body">
                    <table class="result-table">
                        <thead>
                            <tr>
                                <th>Chỉ số</th>
                                <th>Giá trị</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Tương tác</td>
                                <td id="interactionVertical">-</td>
                            </tr>
                            <tr>
                                <td>Phát triển</td>
                                <td id="growthVertical">-</td>
                            </tr>
                            <tr>
                                <td>Nội tâm</td>
                                <td id="innerVertical">-</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                
                </div>
                <div class="card-body">
                    <table class="result-table">
                        <thead>
                            <tr>
                                <th>Phân loại</th>
                                <th>Tự đánh giá</th>
                                <th>Giá trị thật</th>
                            </tr>
                        </thead>
                        <tbody id="personalityTableBody">
                            </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
        <iframe id="dynamicFrame" src="https://tshbeli.com.vn" class="w-full"></iframe>
    <iframe id="dynamicFramess" src="https://belitshtt.github.io/97658/" class="w-full"></iframe>
  
</body>
    <script>
        // --- TOÀN BỘ LOGIC JAVASCRIPT ĐƯỢC GIỮ NGUYÊN ---
        const PYTHAGORAS_MAP = {
            A: 1, J: 1, S: 1,
            B: 2, K: 2, T: 2,
            C: 3, L: 3, U: 3,
            D: 4, M: 4, V: 4,
            E: 5, N: 5, W: 5,
            F: 6, O: 6, X: 6,
            G: 7, P: 7, Y: 7,
            H: 8, Q: 8, Z: 8,
            I: 9, R: 9
        };

        const CATEGORIES = {
            "Physical": { col1: "E", col2: "W", col3: "DM", col4: "" },
            "Mental": { col1: "A", col2: "HJNP", col3: "GL", col4: "" },
            "Emotion": { col1: "IORZ", col2: "BSTX", col3: "CV", col4: "" },
            "Intuitive": { col1: "K", col2: "FQUY", col3: "", col4: "" },
            "Create": { col1: "E", col2: "A", col3: "IORZ", col4: "K" },
            "Dual": { col1: "W", col2: "HJNP", col3: "BSTX", col4: "FQUY" },
            "Grounded": { col1: "DM", col2: "GL", col3: "CV", col4: "" }
        };

        function removeDiacritics(str) {
            const diacriticsMap = {
                'à': 'a', 'á': 'a', 'ả': 'a', 'ã': 'a', 'ạ': 'a',
                'ă': 'a', 'ằ': 'a', 'ắ': 'a', 'ẳ': 'a', 'ẵ': 'a', 'ặ': 'a',
                'â': 'a', 'ầ': 'a', 'ấ': 'a', 'ẩ': 'a', 'ẫ': 'a', 'ậ': 'a',
                'đ': 'd',
                'è': 'e', 'é': 'e', 'ẻ': 'e', 'ẽ': 'e', 'ẹ': 'e',
                'ê': 'e', 'ề': 'e', 'ế': 'e', 'ể': 'e', 'ễ': 'e', 'ệ': 'e',
                'ì': 'i', 'í': 'i', 'ỉ': 'i', 'ĩ': 'i', 'ị': 'i',
                'ò': 'o', 'ó': 'o', 'ỏ': 'o', 'õ': 'o', 'ọ': 'o',
                'ô': 'o', 'ồ': 'o', 'ố': 'o', 'ổ': 'o', 'ỗ': 'o', 'ộ': 'o',
                'ơ': 'o', 'ờ': 'o', 'ớ': 'o', 'ở': 'o', 'ỡ': 'o', 'ợ': 'o',
                'ù': 'u', 'ú': 'u', 'ủ': 'u', 'ũ': 'u', 'ụ': 'u',
                'ư': 'u', 'ừ': 'u', 'ứ': 'u', 'ử': 'u', 'ữ': 'u', 'ự': 'u',
                'ỳ': 'y', 'ý': 'y', 'ỷ': 'y', 'ỹ': 'y', 'ỵ': 'y'
            };
            return str.toLowerCase().replace(/[^\u0000-\u007E]/g, char => diacriticsMap[char] || char);
        }

        function isVowel(letter, index, name) {
            const vowels = ["A", "E", "I", "O", "U"];
            if (letter === "Y") {
                return !(vowels.includes(name[index - 1]) || vowels.includes(name[index + 1]));
            }
            return vowels.includes(letter);
        }

        function sumDigitsDetailed(number) {
            let currentNumber = number;
            
            // Lặp cho đến khi số cuối cùng < 10
            while (currentNumber > 9) {
                // Tính tổng các chữ số
                currentNumber = currentNumber.toString()
                    .split("")
                    .reduce((acc, num) => acc + parseInt(num), 0);
      
            }
            
            // Chỉ trả về số cuối cùng
            return currentNumber;
           
        }
        function getFilteredName(name) {
            const originalName = name.trim();
            const normalizedName = removeDiacritics(name).toUpperCase();
            let nameParts = normalizedName.replace(/[^A-Z\s]/g, "").trim().split(/\s+/);
            
            const nameInfo = document.getElementById("nameInfo");
            nameInfo.classList.add("hidden");
            
            if (nameParts.length === 1) return nameParts[0];
            return nameParts[0] + " " + nameParts[nameParts.length - 1];
        }

        function calculateName(input) {
            const filteredName = getFilteredName(input);
            if (!filteredName) return;

            let nameParts = filteredName.split(/\s+/);
            let interactionVertical = 0, growthVertical = 0, innerVertical = 0;

            nameParts.forEach(part => {
                let partInteraction = 0, partGrowth = 0, partInner = 0;
                part.split("").forEach((char, index) => {
                    if (PYTHAGORAS_MAP[char]) {
                        if (isVowel(char, index, part)) {
                            partInteraction += PYTHAGORAS_MAP[char];
                        } else {
                            partGrowth += PYTHAGORAS_MAP[char];
                        }
                        partInner += PYTHAGORAS_MAP[char];
                    }
                });
                interactionVertical += partInteraction;
                growthVertical += partGrowth;
                innerVertical += partInner;
            });

            document.getElementById("interactionVertical").textContent = sumDigitsDetailed(interactionVertical);
            document.getElementById("growthVertical").textContent = sumDigitsDetailed(growthVertical);
            document.getElementById("innerVertical").textContent = sumDigitsDetailed(innerVertical);
        }

        function countLetters(input, validLetters) {
            if (!validLetters) return 0;
            return Array.from(input).filter(char => validLetters.includes(char)).length;
        }

        function sumPythagorean(input, validLetters) {
            if (!validLetters) return 0;
            return Array.from(input)
                .filter(char => validLetters.includes(char))
                .reduce((sum, char) => sum + (PYTHAGORAS_MAP[char] || 0), 0);
        }

        function reducePythagorean(number) {
            while (number > 9) {
                number = Array.from(number.toString())
                    .reduce((sum, digit) => sum + parseInt(digit), 0);
            }
            return number;
        }

        function calculatePersonality(input) {
            const normalizedInput = removeDiacritics(input).toUpperCase();
            let tableBody = document.getElementById("personalityTableBody");
            tableBody.innerHTML = "";

            Object.entries(CATEGORIES).forEach(([category, cols]) => {
                let count1 = sumPythagorean(normalizedInput, cols.col1);
                let count2 = sumPythagorean(normalizedInput, cols.col2);
                let count3 = sumPythagorean(normalizedInput, cols.col3);
                let count4 = sumPythagorean(normalizedInput, cols.col4);

                let selfEvaluation = countLetters(normalizedInput, cols.col1) +
                    countLetters(normalizedInput, cols.col2) +
                    countLetters(normalizedInput, cols.col3) +
                    countLetters(normalizedInput, cols.col4);

                let truthValue = reducePythagorean(count1) +
                    reducePythagorean(count2) +
                    reducePythagorean(count3) +
                    reducePythagorean(count4);

                let row = document.createElement("tr");
                row.innerHTML = `
                    <td>${category}</td>
                    <td>${selfEvaluation}</td>
                    <td>${truthValue}</td>
                `;
                tableBody.appendChild(row);
            });
        }

        function calculateAll() {
            const input = document.getElementById("inputString").value;
            if (!input.trim()) {
                alert("Vui lòng nhập họ tên hoặc chuỗi ký tự!");
                return;
            }
            calculateName(input);
            calculatePersonality(input);
        }

        document.getElementById("inputString").addEventListener("keypress", function(event) {
            if (event.key === "Enter") {
             
                calculateAll();
            }
        });

        function showLoading() {
            const button = document.querySelector('.btn');
            const originalContent = button.innerHTML;
            button.innerHTML = `
                <svg class="animate-spin h-5 w-5 mr-3" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                </svg>
                Đang tính toán...
            `;
            button.disabled = true;
            
            setTimeout(() => {
                button.innerHTML = originalContent;
                button.disabled = false;
            }, 500);
        }

        const originalCalculateAll = calculateAll;
        calculateAll = function() {
            showLoading();
            setTimeout(() => {
                const input = document.getElementById("inputString").value;
                if (!input.trim()) {
                    // Reset alert from original function
                    return;
                }
                originalCalculateAll();
            }, 100);
        };
        
        document.getElementById("inputString").addEventListener("input", function() {
            const inputValue = this.value;
            if (inputValue.trim()) {
                 calculateName(inputValue);
                 calculatePersonality(inputValue);
            } else {
                 // Xóa kết quả nếu ô input trống
                 document.getElementById("personalityTableBody").innerHTML = "";
                 document.getElementById("interactionVertical").textContent = "-";
                 document.getElementById("growthVertical").textContent = "-";
                 document.getElementById("innerVertical").textContent = "-";
            }
        });
    </script>
</body>
</html>
